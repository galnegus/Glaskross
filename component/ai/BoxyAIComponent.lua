BoxyAIComponent = Class{}
BoxyAIComponent:include(Component)

function BoxyAIComponent:init()
    self.type = "ai"

    self._beams = {}

    circlin = BoxyBeamPattern(self)
    circlin:add(1, 1, 2, 3)
    circlin:add(2, 1, 0.25, 3)
    circlin:add(3, 1, 0.25, 3)
    circlin:add(4, 1, 0.25, 3)
    circlin:add(4, 2, 0.25, 1)
    circlin:add(3, 2, 0.25, 1)
    circlin:add(2, 2, 0.25, 1)
    circlin:add(1, 2, 0.25, 1)
    circlin:add(1, 3, 0.25, 2)
    circlin:add(2, 3, 0.25, 1.75)
    circlin:add(3, 3, 0.25, 1.5)
    circlin:add(4, 3, 0.25, 1)
    circlin:add(4, 2, 0.25, 1)
    circlin:add(3, 2, 0.25, 2)
    circlin:add(2, 2, 0.25, 1)
    circlin:add(1, 2, 0.25, 1)
    circlin:add(1, 1, 0.25, 1)
    circlin:add(2, 1, 0.25, 1)
    circlin:add(3, 1, 0.25, 1)
    circlin:add(4, 1, 0.25, 1)
    circlin:add(4, 2, 0.25, 1)
    circlin:add(4, 3, 0.25, 1)

    circlinSlow = BoxyBeamPattern(self)
    circlinSlow:add(1, 1, 2, 6)
    circlinSlow:add(2, 1, 0.5, 6)
    circlinSlow:add(3, 1, 0.5, 6)
    circlinSlow:add(4, 1, 0.5, 6)
    circlinSlow:add(4, 2, 0.5, 2)
    circlinSlow:add(3, 2, 0.5, 2)
    circlinSlow:add(2, 2, 0.5, 2)
    circlinSlow:add(1, 2, 0.5, 2)
    circlinSlow:add(1, 3, 0.5, 4)
    circlinSlow:add(2, 3, 0.5, 3.5)
    circlinSlow:add(3, 3, 0.5, 3)
    circlinSlow:add(4, 3, 0.5, 2)
    circlinSlow:add(4, 2, 0.5, 2)
    circlinSlow:add(3, 2, 0.5, 2)
    circlinSlow:add(2, 2, 0.5, 2)
    circlinSlow:add(1, 2, 0.5, 2)
    circlinSlow:add(1, 1, 0.5, 2)
    circlinSlow:add(2, 1, 0.5, 2)
    circlinSlow:add(3, 1, 0.5, 2)
    circlinSlow:add(4, 1, 0.5, 2)
    circlinSlow:add(4, 2, 0.5, 2)
    circlinSlow:add(4, 3, 0.5, 2)


    beamPattern = BoxyBeamPattern(self)
    beamPattern:add(1, 1, 2)
    beamPattern:add(1, 2, 0)
    beamPattern:add(1, 3, 0)
    beamPattern:add(3, 1, 1)
    beamPattern:add(3, 2, 0)
    beamPattern:add(3, 3, 0)
    beamPattern:add(2, 1, 1)
    beamPattern:add(2, 2, 0)
    beamPattern:add(2, 3, 0)
    beamPattern:add(4, 1, 1)
    beamPattern:add(4, 2, 0)
    beamPattern:add(4, 3, 0)

    beamPattern2 = BoxyBeamPattern(self)
    beamPattern2:add(1, 1, 2)
    beamPattern2:add(2, 2, 0.25)
    beamPattern2:add(3, 3, 0.25)
    beamPattern2:add(4, 1, 0.25)
    beamPattern2:add(1, 2, 0.25)
    beamPattern2:add(2, 3, 0.25)
    beamPattern2:add(3, 1, 0.25)
    beamPattern2:add(4, 2, 0.25)
    beamPattern2:add(1, 3, 0.25)
    beamPattern2:add(2, 1, 0.25)
    beamPattern2:add(3, 2, 0.25)
    beamPattern2:add(4, 3, 0.25)

    beamPattern3 = BoxyBeamPattern(self)
    beamPattern3:add(1, 1, 2)
    beamPattern3:add(2, 1, 0)
    beamPattern3:add(3, 1, 0)
    beamPattern3:add(4, 1, 0)
    beamPattern3:add(1, 2, 0)
    beamPattern3:add(2, 2, 0)
    beamPattern3:add(3, 2, 0)
    beamPattern3:add(4, 2, 0)

    chain = PatternChainer()

    --chain:add(beamPattern)
    --chain:add(beamPattern2)
    chain:add(circlin)
    chain:add(circlin)
    chain:add(beamPattern)
    --chain:add(beamPattern3)
    

    chain:start()

    Signal.emit("add entity", EntityCreator.create("death wall"))

    --beamPattern:start(function() beamPattern:start() end)
end